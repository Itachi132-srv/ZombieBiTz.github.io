<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Zombie BiTz</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Press+Start+2P&display=swap');

body{
  margin:0;
  overflow:hidden;
  background:#000;
  font-family:'Orbitron',sans-serif;
}

button{
  cursor:pointer;
}

/* OVERLAYS */
.overlay{
  position:absolute;
  top:0;left:0;width:100%;height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
}

#menu{
  background:#000;
  color:#88ff88;
}

#gameOver{
  background:rgba(0,0,0,0.9);
  color:#ff5050;
  display:none;
}

#shop{
  background:#000;
  color:#4fc3ff;
  display:none;
}

h1{
  font-family:'Press Start 2P',cursive;
  font-size:2.5em;
  margin-bottom:20px;
}

.menuBtn{
  font-family:'Press Start 2P';
  font-size:1em;
  padding:15px 40px;
  margin:10px;
  border:none;
  border-radius:12px;
  background:#222;
  color:#fff;
}

.menuBtn:hover{
  background:#4fc3ff;
  color:#000;
}

/* SHOP */
.shopRow{
  display:flex;
  gap:20px;
  margin-top:20px;
}

.jet{
  border:2px solid #4fc3ff;
  padding:15px;
  border-radius:12px;
  text-align:center;
  width:120px;
}

.jet img{
  width:80px;
  height:80px;
}

.price{
  color:#ffd54f;
  margin-top:8px;
  font-size:14px;
}

/* GAME UI */
canvas{display:block;}

#fireBtn,#leftBtn,#rightBtn{
  position:absolute;
  bottom:20px;
  border:2px solid #fff;
  background:transparent;
  color:white;
}

#fireBtn{
  right:20px;
  width:80px;height:80px;
  border-radius:40px;
}

#leftBtn,#rightBtn{
  width:60px;height:60px;
  border-radius:30px;
}

#leftBtn{left:20px;}
#rightBtn{left:100px;}

#restartBtn::before{content:"‚Üª ";}
#menuBtn::before{content:"‚åÇ ";}
</style>
</head>

<body>

<!-- MAIN MENU -->
<div id="menu" class="overlay">
  <h1>Zombie BiTz</h1>
  <p>ü™ô Coins: <span id="coinDisplay">0</span></p>
  <p>üèÜ High Score: <span id="highScoreDisplay">0</span></p>
  <button class="menuBtn" onclick="startGame()">PLAY</button>
  <button class="menuBtn" onclick="openShop()">SHOP</button>
  <button class="menuBtn" onclick="quitGame()">QUIT</button>
</div>

<!-- SHOP -->
<div id="shop" class="overlay">
  <h1>JET SHOP</h1>

  <div class="shopRow">
    <div class="jet">
      <img src="slime.png">
      <div>Slime Jet</div>
      <div class="price">5,000 Coins</div>
    </div>

    <div class="jet">
      <img src="fire.png">
      <div>Fire Jet</div>
      <div class="price">12,000 Coins</div>
    </div>

    <div class="jet">
      <img src="shardex.png">
      <div>Shardex Jet</div>
      <div class="price">70,000 Coins</div>
    </div>
  </div>

  <button class="menuBtn" onclick="closeShop()">BACK</button>
</div>

<!-- GAME OVER -->
<div id="gameOver" class="overlay">
  <h1>DEFEAT ‚ò†</h1>
  <p>Score: <span id="finalScore">0</span></p>
  <button class="menuBtn" id="restartBtn" onclick="restartGame()">RESTART</button>
  <button class="menuBtn" id="menuBtn" onclick="backToMenu()">MAIN MENU</button>
</div>

<canvas id="gameCanvas"></canvas>
<button id="fireBtn">FIRE</button>
<button id="leftBtn">‚óÄ</button>
<button id="rightBtn">‚ñ∂</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let coins = parseInt(localStorage.getItem("coins")) || 0;
let highScore = parseInt(localStorage.getItem("highScore")) || 0;

coinDisplay.innerText = coins;
highScoreDisplay.innerText = highScore;

let player={x:canvas.width/2,y:canvas.height-50,speed:7,score:0};
let bullets=[],zombies=[];
let gameStarted=false,enemySpawn,moveDir=0;

const zombieImg=new Image(); zombieImg.src="zombie.png";
const playerImg=new Image(); playerImg.src="jet.png";
const bgImg=new Image(); bgImg.src="background.png";

/* CONTROLS */
leftBtn.ontouchstart=()=>moveDir=-1;
leftBtn.ontouchend=()=>moveDir=0;
rightBtn.ontouchstart=()=>moveDir=1;
rightBtn.ontouchend=()=>moveDir=0;
fireBtn.ontouchstart=fireBullet;

document.addEventListener("keydown",e=>{
  if(e.code==="ArrowLeft") moveDir=-1;
  if(e.code==="ArrowRight") moveDir=1;
  if(e.code==="Space") fireBullet();
});

document.addEventListener("keyup",e=>{
  if(e.code.includes("Arrow")) moveDir=0;
});

function gameLoop(){
  if(!gameStarted) return;

  ctx.drawImage(bgImg,0,0,canvas.width,canvas.height);

  player.x+=player.speed*moveDir;
  player.x=Math.max(20,Math.min(canvas.width-20,player.x));
  ctx.drawImage(playerImg,player.x-20,player.y-20,40,40);

  bullets.forEach((b,i)=>{
    b.y-=10;
    ctx.fillStyle="#4fc3ff";
    ctx.beginPath();
    ctx.arc(b.x,b.y,5,0,Math.PI*2);
    ctx.fill();

    zombies.forEach((z,j)=>{
      if(b.x>z.x-25&&b.x<z.x+25&&b.y>z.y-25&&b.y<z.y+25){
        bullets.splice(i,1);
        zombies.splice(j,1);
        player.score+=10;
        coins+=10;
        localStorage.setItem("coins",coins);
      }
    });
  });

  zombies.forEach(z=>{
    z.y+=z.speed;
    ctx.drawImage(zombieImg,z.x-25,z.y-25,50,50);
    if(z.y>canvas.height) gameOver();
  });

  ctx.fillStyle="#fff";
  ctx.fillText("Score: "+player.score,10,30);
  ctx.fillText("Coins: "+coins,10,55);

  requestAnimationFrame(gameLoop);
}

function spawnZombie(){
  zombies.push({x:Math.random()*(canvas.width-60)+30,y:-40,speed:2+Math.random()});
}

function fireBullet(){
  if(!gameStarted) return;
  bullets.push({x:player.x,y:player.y-20});
}

function startGame(){
  menu.style.display="none";
  gameStarted=true;
  bullets=[];zombies=[];player.score=0;
  enemySpawn=setInterval(spawnZombie,1000);
  gameLoop();
}

function gameOver(){
  clearInterval(enemySpawn);
  gameStarted=false;
  finalScore.innerText=player.score;

  if(player.score>highScore){
    highScore=player.score;
    localStorage.setItem("highScore",highScore);
  }

  highScoreDisplay.innerText=highScore;
  coinDisplay.innerText=coins;
  gameOver.style.display="flex";
}

function restartGame(){gameOver.style.display="none";startGame();}
function backToMenu(){gameOver.style.display="none";menu.style.display="flex";}
function openShop(){menu.style.display="none";shop.style.display="flex";}
function closeShop(){shop.style.display="none";menu.style.display="flex";}
function quitGame(){location.reload();}
</script>

</body>
</html>
