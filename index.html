<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ZOMBIE BITZ</title>

<style>
body{margin:0;background:#000;color:#fff;font-family:sans-serif;overflow:hidden}

/* TOP LINE BAR */
#topbar{
position:absolute;
top:0;left:0;right:0;
display:flex;
justify-content:center;
gap:50px;
padding:12px;
background:#000;
border-bottom:2px solid #333;
z-index:10
}

.item{
padding:8px 20px;
border-bottom:2px solid #555;
font-weight:bold;
cursor:pointer
}

/* DEFEAT PAGE */
#defeat{
position:absolute;
inset:0;
display:none;
flex-direction:column;
justify-content:center;
align-items:center;
background:rgba(0,0,0,.85);
z-index:20
}

.btn{
margin:10px;
padding:15px 30px;
background:#333;
border-radius:14px;
font-size:18px;
cursor:pointer
}

canvas{display:none}
</style>
</head>

<body>

<div id="topbar">
<div class="item">ğŸ† <span id="highUI">0</span></div>
<div class="item">ğŸ§  <span id="mindUI">0</span></div>
<div class="item" onclick="startGame()">â–¶ PLAY</div>
</div>

<div id="defeat">
<h1 style="color:red">Defeat â˜ </h1>
<h3>Score: <span id="dScore">0</span></h3>
<h3>ğŸ§  Minds: <span id="dMinds">0</span></h3>
<div class="btn" onclick="restartGame()">ğŸ”„ Restart</div>
<div class="btn" onclick="mainMenu()">ğŸ  Main Menu</div>
</div>

<canvas id="game"></canvas>

<script>

let save=JSON.parse(localStorage.getItem("zb"))||{high:0,minds:0}

let jetImg=new Image()
jetImg.src="jet.gif"

let zombieImgs=[]
for(let n of ["zombie.png","zombie2.png","zombie3.png"]){
let img=new Image()
img.src=n
zombieImgs.push(img)
}

let c=document.getElementById("game")
let g=c.getContext("2d")

let x,y
let bullets=[],zombies=[],blood=[],poisons=[],drops=[]

let score=0
let matchMinds=0
let totalMinds=save.minds
let health=3
let doubleFire=false

let running=false
let spawnTimer,fireTimer

highUI.innerText=save.high
mindUI.innerText=totalMinds

function startGame(){
if(running) return
running=true

score=0
matchMinds=0
health=3
doubleFire=false

c.style.display="block"
c.width=innerWidth
c.height=innerHeight

x=c.width/2
y=c.height-80

spawnTimer=setInterval(spawnZombie,1000)
fireTimer=setInterval(autoFire,200)

loop()
}

function spawnZombie(){
let types=["green","blue","red"]
zombies.push({
x:Math.random()*c.width,
y:-10,
s:3,
type:types[Math.floor(Math.random()*3)],
img:zombieImgs[Math.floor(Math.random()*3)]
})
}

function autoFire(){
bullets.push({x:x,y:y})
if(doubleFire) bullets.push({x:x+12,y:y})
}

c.addEventListener("touchmove",e=>{
if(running) x=e.touches[0].clientX
})

function loop(){
if(!running) return

g.clearRect(0,0,c.width,c.height)
g.drawImage(jetImg,x-25,y-25,50,50)

bullets.forEach(b=>{
b.y-=8
g.fillStyle="yellow"
g.fillRect(b.x,b.y,4,8)
})

zombies.forEach((z,zi)=>{
z.y+=z.s
g.drawImage(z.img,z.x,z.y,40,40)

if(Math.random()<0.01)
poisons.push({x:z.x+20,y:z.y+20,type:z.type})

bullets.forEach((b,bi)=>{
if(Math.abs(b.x-z.x)<20 && Math.abs(b.y-z.y)<20){

for(let i=0;i<6;i++)
blood.push({x:z.x+20,y:z.y+20,vy:Math.random()*3})

if(Math.random()<0.25)
drops.push({x:z.x,y:z.y})

zombies.splice(zi,1)
bullets.splice(bi,1)

score++

if(Math.random()<0.3){
matchMinds++
}
}
})

if(Math.abs(z.x-x)<25 && Math.abs(z.y-y)<25)
endGame()
})

blood.forEach((p,pi)=>{
p.y+=p.vy
g.fillStyle="blue"
g.fillRect(p.x,p.y,3,3)
if(p.y>c.height) blood.splice(pi,1)
})

poisons.forEach((p,pi)=>{
p.y+=5
g.fillStyle=p.type=="green"?"green":p.type=="blue"?"cyan":"red"
g.fillRect(p.x,p.y,6,10)

if(Math.abs(p.x-x)<20 && Math.abs(p.y-y)<20){
if(p.type=="green") health--
if(p.type=="blue") health-=2
if(p.type=="red") health=0
poisons.splice(pi,1)
if(health<=0) endGame()
}
})

drops.forEach((d,di)=>{
g.fillStyle="blue"
g.fillRect(d.x,d.y,14,14)
g.fillStyle="white"
g.fillText("+",d.x+3,d.y+11)
d.y+=2

if(Math.abs(d.x-x)<25 && Math.abs(d.y-y)<25){
doubleFire=true
drops.splice(di,1)
}
})

requestAnimationFrame(loop)
}

function endGame(){

running=false
clearInterval(spawnTimer)
clearInterval(fireTimer)

save.high=Math.max(save.high,score)
save.minds+=matchMinds
localStorage.setItem("zb",JSON.stringify(save))

dScore.innerText=score
dMinds.innerText=matchMinds
defeat.style.display="flex"
}

function restartGame(){
location.reload()
}

function mainMenu(){
location.reload()
}

</script>
</body>
</html>
