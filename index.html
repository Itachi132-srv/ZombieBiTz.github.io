<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ZOMBIE BITZ</title>

<style>
body{margin:0;background:#000;color:#fff;font-family:sans-serif;overflow:hidden}

#topbar{
position:absolute;
top:0;
left:0;
right:0;
display:flex;
justify-content:space-between;
align-items:center;
padding:10px;
background:#111;
z-index:10
}

.blue{background:linear-gradient(135deg,#00f,#fff);padding:10px;border-radius:10px}
.green{background:linear-gradient(135deg,#0f0,#fff);padding:10px;border-radius:10px}
.pink{background:linear-gradient(135deg,#ff00aa,#fff);padding:10px;border-radius:10px}

canvas{display:none}
</style>
</head>

<body>

<div id="topbar">
<div class="blue">ðŸª™ <span id="scoreUI">0</span></div>
<div class="pink">ðŸ§  <span id="mindUI">0</span></div>
<button class="green" onclick="startGame()">â–¶ PLAY</button>
</div>

<canvas id="game"></canvas>

<script>

let jetImg=new Image()
jetImg.src="jet.gif"

let zombieImgs=[]
for(let n of ["zombie.png","zombie2.png","zombie3.png"]){
let img=new Image()
img.src=n
zombieImgs.push(img)
}

let save=JSON.parse(localStorage.getItem("zb"))||{score:0,minds:0}

scoreUI.innerText=save.score
mindUI.innerText=save.minds

let c=document.getElementById("game")
let x,y
let bullets=[]
let zombies=[]
let blood=[]
let firePlus=0
let score=0
let minds=save.minds

function startGame(){
c.style.display="block"
c.width=innerWidth
c.height=innerHeight

x=c.width/2
y=c.height-80

loop()
spawn()
}

c.addEventListener("touchmove",e=>{
x=e.touches[0].clientX
})

function loop(){
let g=c.getContext("2d")
g.clearRect(0,0,c.width,c.height)

g.drawImage(jetImg,x-25,y-25,50,50)

bullets.forEach(b=>{
b.y-=8
g.fillStyle="yellow"
g.fillRect(b.x,b.y,4,8)
})

zombies.forEach((z,zi)=>{
z.y+=z.s
g.drawImage(z.img,z.x,z.y,40,40)

bullets.forEach((b,bi)=>{
if(Math.abs(b.x-z.x)<20 && Math.abs(b.y-z.y)<20){

// blue blood particles
for(let i=0;i<6;i++){
blood.push({x:z.x+20,y:z.y+20,vy:Math.random()*3})
}

zombies.splice(zi,1)
bullets.splice(bi,1)

score++
scoreUI.innerText=score

if(Math.random()<0.3){
minds++
mindUI.innerText=minds
}

if(Math.random()<0.1 && firePlus<5){
firePlus++
}
}
})

if(Math.abs(z.x-x)<25 && Math.abs(z.y-y)<25){
endGame()
}
})

blood.forEach((p,pi)=>{
p.y+=p.vy
g.fillStyle="blue"
g.fillRect(p.x,p.y,3,3)
if(p.y>c.height) blood.splice(pi,1)
})

requestAnimationFrame(loop)
}

setInterval(()=>{
bullets.push({x:x,y:y})
for(let i=0;i<firePlus;i++){
bullets.push({x:x+(i*8),y:y})
}
},200)

function spawn(){
setInterval(()=>{
zombies.push({
x:Math.random()*c.width,
y:-10,
s:3,
img:zombieImgs[Math.floor(Math.random()*zombieImgs.length)]
})
},1000)
}

function endGame(){
save.score=Math.max(save.score,score)
save.minds=minds
localStorage.setItem("zb",JSON.stringify(save))
location.reload()
}

</script>
</body>
</html>
