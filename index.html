<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Zombie BiTz</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

body{margin:0;overflow:hidden;background:#000;font-family:'Orbitron',sans-serif;color:#fff}

#overlay,#gameOverOverlay{
 position:absolute;inset:0;display:flex;
 flex-direction:column;justify-content:center;align-items:center;
 background:#000;z-index:10
}
#gameOverOverlay{display:none;background:rgba(0,0,0,.9)}

button{
 padding:14px 40px;font-size:18px;
 background:#222;color:#fff;border:none;border-radius:12px
}

#topBar{
 position:absolute;top:10px;left:10px;z-index:5;
 font-size:18px
}

canvas{display:block}
</style>
</head>

<body>

<div id="topBar">SCORE: <span id="score">0</span></div>

<div id="overlay">
 <h1>ZOMBIE BITZ</h1>
 <button onclick="startGame()">PLAY</button>
</div>

<div id="gameOverOverlay">
 <h1 style="color:red">DEFEAT â˜ </h1>
 <p id="finalScore">SCORE: 0</p>
 <button onclick="restartGame()">RESTART</button>
 <button onclick="backToMenu()">MAIN MENU</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

const jetImg=new Image(); jetImg.src="jet.gif";
const zombieImg=new Image(); zombieImg.src="zombie.png";

let player,bullets,zombies,poisons,powers;
let gameRunning=false,doubleFire=false;
let fireTimer,spawnTimer;

function startGame(){
 overlay.style.display="none";
 gameOverOverlay.style.display="none";
 canvas.width=innerWidth;canvas.height=innerHeight;

 player={x:canvas.width/2,y:canvas.height-80};
 bullets=[];zombies=[];poisons=[];powers=[];
 doubleFire=false;
 score.innerText=0;
 gameRunning=true;

 fireTimer=setInterval(autoFire,200);
 spawnTimer=setInterval(spawnZombie,1200);
 requestAnimationFrame(gameLoop);
}

function autoFire(){
 if(!gameRunning) return;
 bullets.push({x:player.x,y:player.y});
 if(doubleFire) bullets.push({x:player.x+15,y:player.y});
}

canvas.addEventListener("touchmove",e=>{
 player.x=e.touches[0].clientX;
});

function spawnZombie(){
 zombies.push({
  x:Math.random()*(canvas.width-50)+25,
  y:-40,
  speed:2+Math.random()*1.5,
  poisonTimer:0
 });
}

function gameLoop(){
 if(!gameRunning) return;
 ctx.clearRect(0,0,canvas.width,canvas.height);

 /* PLAYER */
 ctx.drawImage(jetImg,player.x-20,player.y-20,40,40);

 /* BULLETS */
 bullets.forEach((b,i)=>{
  b.y-=10;
  ctx.fillStyle="yellow";
  ctx.fillRect(b.x,b.y,4,8);
  if(b.y<0) bullets.splice(i,1);
 });

 /* ZOMBIES */
 zombies.forEach((z,zi)=>{
  z.y+=z.speed;
  ctx.drawImage(zombieImg,z.x-25,z.y-25,50,50);

  z.poisonTimer++;
  if(z.poisonTimer>90){
   poisons.push({x:z.x,y:z.y});
   z.poisonTimer=0;
  }

  if(z.y>canvas.height) endGame();

  bullets.forEach((b,bi)=>{
   if(b.x>z.x-25&&b.x<z.x+25&&b.y>z.y-25&&b.y<z.y+25){
    bullets.splice(bi,1);
    zombies.splice(zi,1);
    score.innerText=parseInt(score.innerText)+10;
    if(Math.random()<0.3)
     powers.push({x:z.x,y:z.y});
   }
  });
 });

 /* POISON */
 poisons.forEach(p=>{
  p.y+=5;
  ctx.fillStyle="lime";
  ctx.beginPath();
  ctx.arc(p.x,p.y,5,0,Math.PI*2);
  ctx.fill();
  if(Math.abs(p.x-player.x)<15&&Math.abs(p.y-player.y)<15)
   endGame();
 });

 /* POWER DROP */
 powers.forEach((pw,pi)=>{
  pw.y+=3;
  ctx.fillStyle="cyan";
  ctx.beginPath();
  ctx.arc(pw.x,pw.y,8,0,Math.PI*2);
  ctx.fill();
  ctx.fillStyle="#000";
  ctx.fillText("+",pw.x-3,pw.y+4);
  if(Math.abs(pw.x-player.x)<15&&Math.abs(pw.y-player.y)<15){
   doubleFire=true;
   powers.splice(pi,1);
  }
 });

 requestAnimationFrame(gameLoop);
}

function endGame(){
 gameRunning=false;
 clearInterval(fireTimer);
 clearInterval(spawnTimer);
 finalScore.innerText="SCORE: "+score.innerText;
 gameOverOverlay.style.display="flex";
}

function restartGame(){startGame()}
function backToMenu(){location.reload()}
</script>

</body>
</html>
