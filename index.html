<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Zombie BiTz</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Press+Start+2P&display=swap');

body{
 margin:0;overflow:hidden;background:#000;
 font-family:'Orbitron',sans-serif;color:#fff
}

/* ===== MAIN MENU ===== */
#menu{
 position:absolute;inset:0;
 display:flex;flex-direction:column;
 align-items:center;justify-content:center;
 z-index:10
}

#topBar{
 position:absolute;top:15px;left:15px;right:15px;
 display:flex;justify-content:space-between;align-items:center
}

#profile{
 display:flex;align-items:center;gap:10px;
 cursor:pointer
}
#profile img{
 width:40px;height:40px;border-radius:8px;
 border:2px solid #00ffff
}

#scoreBox{
 background:#111;padding:8px 16px;
 border-radius:12px
}

#title{
 font-family:'Press Start 2P',cursive;
 font-size:2.5em;margin-bottom:30px
}

#playBtn{
 font-size:1.2em;padding:14px 50px;
 border:none;border-radius:16px;
 background:#333;color:#fff
}

/* ===== GAME ===== */
canvas{display:none}

/* ===== GAME OVER ===== */
#gameOver{
 position:absolute;inset:0;
 display:none;flex-direction:column;
 justify-content:center;align-items:center;
 background:rgba(0,0,0,.9);z-index:20
}
button{margin:10px}
</style>
</head>

<body>

<!-- ===== MAIN MENU ===== -->
<div id="menu">
 <div id="topBar">
  <div id="profile">
   <img src="jet.gif">
   <span>PLAYER</span>
  </div>
  <div id="scoreBox">SCORE: <span id="score">0</span></div>
 </div>

 <div id="title">ZOMBIE BITZ</div>
 <button id="playBtn" onclick="startGame()">PLAY</button>
</div>

<!-- ===== GAME OVER ===== -->
<div id="gameOver">
 <h1 style="color:red">DEFEAT â˜ </h1>
 <p id="finalScore">SCORE: 0</p>
 <button onclick="restartGame()">RESTART</button>
 <button onclick="backToMenu()">MAIN MENU</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;canvas.height=innerHeight;

const jetImg=new Image(); jetImg.src="jet.gif";
const zombieImg=new Image(); zombieImg.src="zombie.png";

let player,bullets,zombies,poisons,powers;
let running=false,doubleFire=false;
let fireI,spawnI;

function startGame(){
 menu.style.display="none";
 gameOver.style.display="none";
 canvas.style.display="block";

 player={x:canvas.width/2,y:canvas.height-80};
 bullets=[];zombies=[];poisons=[];powers=[];
 doubleFire=false;
 score.innerText=0;
 running=true;

 fireI=setInterval(autoFire,200);
 spawnI=setInterval(spawnZombie,1200);
 requestAnimationFrame(loop);
}

canvas.addEventListener("touchmove",e=>{
 player.x=e.touches[0].clientX;
});

function autoFire(){
 if(!running) return;
 bullets.push({x:player.x,y:player.y});
 if(doubleFire) bullets.push({x:player.x+14,y:player.y});
}

function spawnZombie(){
 zombies.push({
  x:Math.random()*(canvas.width-50)+25,
  y:-40,speed:2+Math.random()*1.5,t:0
 });
}

function loop(){
 if(!running) return;
 ctx.clearRect(0,0,canvas.width,canvas.height);

 ctx.drawImage(jetImg,player.x-20,player.y-20,40,40);

 bullets.forEach((b,i)=>{
  b.y-=10;
  ctx.fillStyle="yellow";
  ctx.fillRect(b.x,b.y,4,8);
  if(b.y<0) bullets.splice(i,1);
 });

 zombies.forEach((z,zi)=>{
  z.y+=z.speed;
  ctx.drawImage(zombieImg,z.x-25,z.y-25,50,50);
  z.t++;
  if(z.t>90){poisons.push({x:z.x,y:z.y});z.t=0;}
  if(z.y>canvas.height) endGame();

  bullets.forEach((b,bi)=>{
   if(b.x>z.x-25&&b.x<z.x+25&&b.y>z.y-25&&b.y<z.y+25){
    bullets.splice(bi,1);
    zombies.splice(zi,1);
    score.innerText=parseInt(score.innerText)+10;
    if(Math.random()<0.3)powers.push({x:z.x,y:z.y});
   }
  });
 });

 poisons.forEach(p=>{
  p.y+=5;
  ctx.fillStyle="lime";
  ctx.beginPath();ctx.arc(p.x,p.y,5,0,Math.PI*2);ctx.fill();
  if(Math.abs(p.x-player.x)<15&&Math.abs(p.y-player.y)<15) endGame();
 });

 powers.forEach((pw,pi)=>{
  pw.y+=3;
  ctx.fillStyle="cyan";
  ctx.beginPath();ctx.arc(pw.x,pw.y,8,0,Math.PI*2);ctx.fill();
  ctx.fillStyle="#000";ctx.fillText("+",pw.x-3,pw.y+4);
  if(Math.abs(pw.x-player.x)<15&&Math.abs(pw.y-player.y)<15){
   doubleFire=true;powers.splice(pi,1);
  }
 });

 requestAnimationFrame(loop);
}

function endGame(){
 running=false;
 clearInterval(fireI);clearInterval(spawnI);
 finalScore.innerText="SCORE: "+score.innerText;
 gameOver.style.display="flex";
}

function restartGame(){startGame()}
function backToMenu(){location.reload()}
</script>

</body>
</html>
