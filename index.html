<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zombie BiTz</title>
<style>
body{margin:0;background:#000;color:#fff;font-family:'Orbitron',sans-serif;overflow:hidden}
*{box-sizing:border-box;text-transform:uppercase}

/* MAIN MENU */
#menu{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:space-between;padding:10px;height:100vh;}
#menuTop{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;}
#highScore,#coinsBox,#mindsBox{font-size:16px;margin:2px;}
#menuCenter{text-align:center;margin-top:30px;font-size:18px;}
#menuBottom{display:flex;justify-content:space-around;margin-bottom:20px;flex-wrap:wrap;gap:10px;}
button{padding:12px 18px;border:none;border-radius:12px;font-family:'Orbitron',sans-serif;cursor:pointer;font-size:16px;}
#shopBtn{background:gold;color:#000;}
#playBtn{background:linear-gradient(135deg,#00c853,#b2ff59);color:#000;}
#settingsBtn{background:gray;color:#fff;}

/* OVERLAYS */
.overlay{position:absolute;inset:0;display:none;flex-direction:column;justify-content:center;align-items:center;background:rgba(0,0,0,.95);z-index:20;width:100%;}
.option{margin:10px;font-size:18px;}
.option button{margin-left:10px;padding:5px 12px;border-radius:6px;font-size:16px;}
#profileUI input{margin:5px;padding:8px;border-radius:6px;border:none;font-size:16px}

/* GAME HUD */
#gameTop{position:absolute;top:10px;left:10px;right:10px;display:flex;justify-content:space-between;align-items:center;z-index:10;display:none}
#hpBox,#scoreBoxGame,#coinsGame,#mindsGame{background:#111;padding:6px 12px;border-radius:10px;font-size:16px}

/* GAME OVER */
#gameOver{position:absolute;inset:0;display:none;flex-direction:column;justify-content:center;align-items:center;background:rgba(0,0,0,.95);z-index:30;text-align:center;padding:10px;}
#gameOver h1{color:red;margin-bottom:10px;font-size:28px}
#gameOver p{margin:5px;font-size:16px;}
#gameOver button{margin:5px 10px;padding:12px 20px;border-radius:12px;font-size:16px;}

/* MOBILE ADJUST */
@media(max-width:600px){
 #menuBottom{flex-direction:column;gap:8px;}
 #menuTop{flex-direction:column;align-items:flex-start;}
 #menuTop div{margin-bottom:5px;}
}
</style>
</head>
<body>

<!-- MAIN MENU -->
<div id="menu">
 <div id="menuTop">
  <div id="highScore">HIGH SCORE: 0</div>
  <div id="coinsBox">COINS: 0 ðŸª™</div>
 </div>
 <div id="menuCenter">
   MINDS COLLECTED: <span id="menuMinds">0</span>
 </div>
 <div id="menuBottom">
  <button id="shopBtn">SHOP</button>
  <button id="playBtn">PLAY</button>
  <button id="settingsBtn">SETTINGS</button>
 </div>
</div>

<!-- SETTINGS -->
<div class="overlay" id="settingsUI">
 <h2>SETTINGS</h2>
 <div class="option">Music <button id="musicBtn">OFF</button></div>
 <div class="option">Sound FX <button id="soundBtn">OFF</button></div>
 <div class="option">FPS <button id="fps30">30</button><button id="fps60">60</button></div>
 <button id="saveSettings" class="btn">SAVE</button><span id="savedTxt" style="margin-left:10px;color:lime;display:none">SAVED</span>
 <button class="btn" onclick="closeAll()">BACK</button>
</div>

<!-- GAME -->
<div id="gameTop">
 <div id="hpBox">HP: <span id="hp">100</span></div>
 <div id="scoreBoxGame">SCORE: <span id="scoreGame">0</span></div>
 <div id="coinsGame">COINS: <span id="coins">0</span></div>
 <div id="mindsGame">MINDS: <span id="minds">0</span></div>
</div>

<canvas id="gameCanvas"></canvas>

<!-- GAME OVER -->
<div id="gameOver">
 <h1>DEFEAT â˜ </h1>
 <p id="finalScore">SCORE: 0</p>
 <p id="coinsEarned">COINS EARNED: 0</p>
 <p id="mindsEarned">MINDS COLLECTED: 0</p>
 <button id="restartBtn">RESTART</button>
 <button id="backMenuBtn">MAIN MENU</button>
</div>

<script>
/* STORAGE */
let data=JSON.parse(localStorage.getItem("ZB"))||{high:0,coins:0,minds:0};
document.getElementById("highScore").innerText="HIGH SCORE: "+data.high;
document.getElementById("coinsBox").innerText="COINS: "+data.coins+" ðŸ’°";
document.getElementById("menuMinds").innerText=data.minds;

/* MENU BUTTONS */
playBtn.onclick=startGame;
shopBtn.onclick=()=>{alert("SOON")};
settingsBtn.onclick=()=>{settingsUI.style.display="flex";};

/* GAME VARIABLES */
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;

let player, bullets=[], zombies=[], score=0, HP=100, coins=0, minds=0, doubleFire=false;
let fireI, spawnI;
const jetImg=new Image(); jetImg.src="jet.gif";
const zombieImg=new Image(); zombieImg.src="zombie.png";

function startGame(){
 player={x:canvas.width/2,y:canvas.height-80};
 bullets=[];zombies=[];score=0;HP=100;coins=0;minds=0;
 document.getElementById("hp").innerText=HP;
 document.getElementById("scoreGame").innerText=score;
 document.getElementById("coins").innerText=coins;
 document.getElementById("minds").innerText=minds;
 menu.style.display="none"; canvas.style.display="block"; gameTop.style.display="flex";
 fireI=setInterval(autoFire,200); spawnI=setInterval(spawnZombie,1200); requestAnimationFrame(loop);
}

/* AUTO FIRE */
function autoFire(){for(let i=0;i<(doubleFire?2:1);i++) bullets.push({x:player.x+i*10-5,y:player.y});}

/* SPAWN ZOMBIE */
function spawnZombie(){
 let z={x:Math.random()*(canvas.width-50)+25,y:-40,hp:50};
 zombies.push(z);
}

/* LOOP */
function loop(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.drawImage(jetImg,player.x-20,player.y-20,40,40);

 bullets.forEach((b,i)=>{b.y-=10;ctx.fillStyle="yellow";ctx.fillRect(b.x,b.y,4,8);if(b.y<0) bullets.splice(i,1);});

 zombies.forEach((z,zi)=>{
  z.y+=2;
  ctx.drawImage(zombieImg,z.x-25,z.y-25,50,50);

  bullets.forEach((b,bi)=>{
   if(Math.abs(b.x-z.x)<25 && Math.abs(b.y-z.y)<25){
    z.hp-=25; bullets.splice(bi,1);
    if(z.hp<=0){
     zombies.splice(zi,1);
     score+=10; coins+=10; document.getElementById("scoreGame").innerText=score;
     document.getElementById("coins").innerText=coins;
     // RANDOM MINDS DROP
     if(Math.random()<0.3){minds+=1;document.getElementById("minds").innerText=minds;}
    }
   }
  });

  if(Math.abs(player.x-z.x)<25 && Math.abs(player.y-z.y)<25){HP-=35;document.getElementById("hp").innerText=HP;}
 });

 if(HP<=0) endGame();
 requestAnimationFrame(loop);
}

function endGame(){
 clearInterval(fireI); clearInterval(spawnI);
 finalScore.innerText="SCORE: "+score;
 coinsEarned.innerText="COINS EARNED: "+coins;
 mindsEarned.innerText="MINDS COLLECTED: "+minds;
 gameOver.style.display="flex"; canvas.style.display="none"; gameTop.style.display="none";
 if(score>data.high) data.high=score;
 data.coins+=coins;
 data.minds+=minds;
 localStorage.setItem("ZB",JSON.stringify(data));
}

/* GAME OVER BUTTONS */
restartBtn.onclick=startGame;
backMenuBtn.onclick=()=>{location.reload();}
</script>
</body>
</html>
